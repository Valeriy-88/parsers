# FruitFamily Parser

Мониторинг товаров на маркетплейсе FruitsFamily с отправкой уведомлений в Telegram.

## Основные функции

### Парсинг товаров
- Поиск товаров по ключевым словам (`SEARCH_TERMS`)
- Поиск товаров по брендам (`SEARCH_BRAND`)
- Получение детальной информации о товарах через GraphQL API
- Формирование ссылок на товары

### Управление данными
- Хранение истории просмотренных товаров (файл `SEEN_FILE`)
- Автоматическая очистка истории при превышении размера
- Ротация лог-файлов (при превышении `MAX_TXT_LOG_SIZE_MB`)

### Уведомления
- Отправка информации в Telegram:
  - Название товара
  - Размер
  - Состояние
  - Цена (с форматированием)
  - Ссылка
  - Фото (если доступно)
- Периодические уведомления о работе сервера (каждые 6 часов)

## Технологии

- Python 3.7+
- Основные библиотеки:
  - `requests` - для работы с GraphQL API
  - `telebot` - для отправки в Telegram
  - `urllib` - для кодирования URL
  - `logging` - для логирования операций

## Особенности реализации

1. **Работа с API**:
   - Использование GraphQL запросов
   - Обработка всех возможных ошибок
   - Поддержка нескольких типов запросов (поиск, бренды, детали)

2. **Управление данными**:
   - Эффективное хранение истории просмотренных товаров
   - Автоматическая очистка старых записей
   - Проверка размера лог-файлов

3. **Уведомления**:
   - Гибкое форматирование сообщений
   - Поддержка отправки фото
   - Периодические отчеты о работе

## Настройка

1. Заполните параметры в файле `settings.py`:
   - `SEARCH_TERMS` - список поисковых запросов
   - `SEARCH_BRAND` - список брендов
   - `SEEN_FILE` - файл для хранения истории
   - `MAX_SEEN_FILE_SIZE_MB` - максимальный размер файла истории
   - `MAX_TXT_LOG_SIZE_MB` - максимальный размер лог-файла

2. Установите зависимости:
```bash
pip install requests pyTelegramBotAPI
```

## Запуск
```bash
python fruit.py
```
